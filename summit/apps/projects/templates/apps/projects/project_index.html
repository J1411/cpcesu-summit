{% extends 'layouts/base.html' %}
{% load static %}

{% block primary %}

{% if pagetitle %}
    <h1 style="text-align: center">{{ pagetitle }}</h1>
{% else %}
    <h1 style="text-align: center">PROJECT PAGE</h1>
{% endif %}

    <div class="container-fluid">
        <form action="{% url 'summit.apps.projects:project-export-csv' %}" method="post" enctype="multipart/form-data"
              name="export_form">
            {% csrf_token %}
            <div>
                <h5><b>Your Projects</b></h5>
                <p class="animated fadeIn text-muted">A table of all your projects that you have created</p>
            </div>

            <table class="dtBasicExample table table-striped table-bordered table-sm" cellspacing="0"
                   style="width:100%">
                <thead>
                <tr>
                    <th class="th-sm">
                        <button class="btn btn-outline-success btn-sm m-0 waves-effect" type="submit" value="Submit">
                            Export
                        </button>
                    </th>
                    <th class="th-sm">P-Num</th>
                    <th class="th-sm">Status</th>
                    <th class="th-sm">Title</th>
                    <th class="th-sm">Federal Agency</th>
                    <th class="th-sm">Partner</th>
                    <th class="th-sm">Type</th>
                    <th class="th-sm">Discipline</th>
                    <th class="th-sm">Fiscal Year</th>
                    <th class="th-sm">Budget</th>
                    <th class="th-sm">View Details</th>
                </tr>
                </thead>
                <tbody>
                {% for project in projects %}
                    <tr>
                        <th scope="row">
                            <input type="checkbox" name="export_list" value="{{ project.id }}"/>
                        </th>
                        <td>{{ project.p_num }}</td>
                        <td>{{ project.get_status_display }}</td>
                        <td>{{ project.project_title }}</td>
                        <td>{{ project.federal_agency }}</td>
                        <td>{{ project.partner }}</td>
                        <td>{{ project.get_type_display }}</td>
                        <td>{{ project.get_discipline_display }}</td>
                        <td>{{ project.fiscal_year }}</td>
                        <td>{{ project.budget }}</td>
                        <td>
                            <a type="button" class="btn btn-outline-primary btn-sm m-0 waves-effect"
                               href="{% url 'summit.apps.projects:project-detail' id=project.id %}">
                                Details
                            </a>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
            <br>

            <div>
                <h5><b>All Recent Projects</b></h5>
                <p class="animated fadeIn text-muted">A table of all of the projects that have been created in the last
                    30 days</p>
            </div>
        </form>
        <form action="{% url 'summit.apps.projects:project-export-csv' %}" method="post" enctype="multipart/form-data"
              name="export_form">
            <table class="dtBasicExample table table-striped table-bordered table-sm" cellspacing="0"
                   style="width: 100%;">
                <thead>
                <tr>
                    <th class="th-sm">
                        <button class="btn btn-outline-success btn-sm m-0 waves-effect" type="submit" value="Submit"
                                style="float: left;">
                            Export
                        </button>
                    </th>
                    <th class="th-sm">P-Num</th>
                    <th class="th-sm">Status</th>
                    <th class="th-sm">Title</th>
                    <th class="th-sm">Federal Agency</th>
                    <th class="th-sm">Partner</th>
                    <th class="th-sm">Staff</th>
                    <th class="th-sm">View Details</th>
                </tr>
                </thead>
                <tbody>
                {% for project in recent_projects %}
                    <tr>
                        <th scope="row">
                            <input type="checkbox" name="export_list" value="{{ project.id }}"/>
                        </th>
                        <td>{{ project.p_num }}</td>
                        <td>{{ project.get_status_display }}</td>
                        <td>{{ project.project_title }}</td>
                        <td>{{ project.federal_agency }}</td>
                        <td>{{ project.partner }}</td>
                        <td>{{ project.staff_member.first_name }} {{ project.staff_member.last_name }}</td>
                        <td>
                            <a type="button" class="btn btn-outline-primary btn-sm m-0 waves-effect"
                               href="{% url 'summit.apps.projects:project-detail' id=project.id %}">
                                Details
                            </a>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </form>
    </div>
{% endblock %}

{% block sidebar %}
    {% include 'apps/projects/partials/side_nav.html' %}
{% endblock %}

{% block layout_wrapper %}
    {% with layout='left'  %}
        {{ block.super }}
    {% endwith %}
{% endblock %}